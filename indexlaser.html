import React, { useState } from 'react';
import { Play, Users, Shield, Zap, Phone, Calendar, Check, Menu, X, ArrowDown, Sparkles, MessageSquare, Loader } from 'lucide-react';

const LaserStrikeLanding = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  
  // AI Modal State
  const [showAIModal, setShowAIModal] = useState(false);
  const [aiMode, setAiMode] = useState('plan'); // 'plan' or 'invite'
  const [aiInputData, setAiInputData] = useState({ kids: '', duration: '', schoolName: '' });
  const [aiOutput, setAiOutput] = useState('');
  const [isLoadingAI, setIsLoadingAI] = useState(false);
  const [aiError, setAiError] = useState('');

  const apiKey = ""; // API Key will be injected by the environment

  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);

  const scrollToSection = (id) => {
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
    }
    setIsMenuOpen(false);
  };

  const handleAiInputChange = (e) => {
    setAiInputData({ ...aiInputData, [e.target.name]: e.target.value });
  };

  const generateAIContent = async () => {
    if ((aiMode === 'plan' && (!aiInputData.kids || !aiInputData.duration)) ||
        (aiMode === 'invite' && !aiInputData.schoolName)) {
      setAiError('אנא מלא את כל השדות הנדרשים');
      return;
    }

    setIsLoadingAI(true);
    setAiOutput('');
    setAiError('');

    let prompt = "";
    if (aiMode === 'plan') {
      prompt = `אני מנהל בית ספר שמתכנן אירוע לייזר טאג נייד של חברת "לייזר סטרייק" באולם הספורט שלנו. יש לנו ${aiInputData.kids} תלמידים והפעילות מתוכננת ל-${aiInputData.duration} שעות. המטרה היא גיבוש, הוצאת אנרגיה והנאה מקסימלית לכולם. בהתבסס על כך שעד 70 תלמידים יכולים לשחק בו זמנית, תציע לי: 1. מבנה עקרוני ללו"ז האירוע (חלוקה לסבבים). 2. שני רעיונות יצירתיים למצבי משחק שמתאימים לאולם ספורט. תהיה תמציתי, פרקטי ואנרגטי.`;
    } else {
      prompt = `כתוב לי טקסט הזמנה קצר, מלהיב, אנרגטי ומלא באימוג'ים (✨🚀🔥), שמיועד לשליחה בוואטסאפ להורים ולתלמידים של בית הספר "${aiInputData.schoolName}". ההזמנה היא ליום שיא שבו תתקיים פעילות לייזר טאג ענקית של חברת "לייזר סטרייק" בתוך אולם הספורט של בית הספר. הדגש שזה בטוח לחלוטין (ללא כדורים), טכנולוגי מאוד, וחוויה בלתי נשכחת.`;
    }

    try {
      const response = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            contents: [{ parts: [{ text: prompt }] }],
          }),
        }
      );

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      if (data.candidates && data.candidates[0] && data.candidates[0].content) {
        setAiOutput(data.candidates[0].content.parts[0].text);
      } else {
        setAiError("לא התקבלה תשובה תקינה, נסה שוב.");
      }

    } catch (error) {
      console.error("Error calling Gemini API:", error);
      setAiError("אירעה שגיאה בתקשורת. אנא נסה שנית מאוחר יותר.");
    } finally {
      setIsLoadingAI(false);
    }
  };

  // Video Data Array
  const videos = [
    {
      id: 1,
      src: "grok-video-477f345c-de0d-4891-9d55-610f7738cc35 (1).mp4",
      title: "גיבוש קבוצתי",
      desc: "התייעצות לפני הקרב! 🤝 #עבודת_צוות"
    },
    {
      id: 2,
      src: "grok-video-d9990605-0a0e-4e52-89d7-dd7036ded7b4.mp4",
      title: "ציוד מתקדם",
      desc: "מוכנים לאקשן! 🔫 #טכנולוגיה"
    },
    {
      id: 3,
      src: "grok-video-789ff85f-c2ee-4dcb-b642-ec60314fcc34.mp4",
      title: "אסטרטגיה וכיף",
      desc: "מכוונים למטרה! 🎯 #פוקוס"
    },
    {
      id: 4,
      src: "grok-video-d5fb1b4b-ff64-41e4-bd11-1628c1b88886.mp4",
      title: "חוויה לכולם",
      desc: "הבנות נותנות בראש! 💪 #גירל_פאוור"
    }
  ];

  return (
    <div className="min-h-screen bg-slate-900 text-white font-sans selection:bg-green-500 selection:text-black dir-rtl" dir="rtl">
      {/* Navigation */}
      <nav className="fixed top-0 w-full z-50 bg-slate-900/90 backdrop-blur-md border-b border-slate-800">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center justify-between h-20">
            <div className="flex-shrink-0 flex items-center gap-2">
              <Zap className="h-8 w-8 text-green-500 fill-current" />
              <span className="font-bold text-2xl tracking-tighter">
                LASER <span className="text-green-500">STRIKE</span>
              </span>
            </div>
            
            <div className="hidden md:block">
              <div className="ml-10 flex items-baseline space-x-8 space-x-reverse">
                <button onClick={() => scrollToSection('home')} className="hover:text-green-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">ראשי</button>
                <button onClick={() => scrollToSection('experience')} className="hover:text-green-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">החוויה</button>
                <button onClick={() => scrollToSection('pricing')} className="hover:text-green-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">חבילות ומחירים</button>
                <button onClick={() => scrollToSection('contact')} className="bg-green-600 hover:bg-green-500 text-black font-bold px-5 py-2 rounded-full transition-transform transform hover:scale-105">
                  שריינו תאריך
                </button>
              </div>
            </div>

            <div className="-mr-2 flex md:hidden">
              <button onClick={toggleMenu} className="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none">
                {isMenuOpen ? <X className="h-6 w-6" /> : <Menu className="h-6 w-6" />}
              </button>
            </div>
          </div>
        </div>

        {/* Mobile menu */}
        {isMenuOpen && (
          <div className="md:hidden bg-slate-800">
            <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3 text-right">
              <button onClick={() => scrollToSection('home')} className="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full text-right">ראשי</button>
              <button onClick={() => scrollToSection('experience')} className="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full text-right">החוויה</button>
              <button onClick={() => scrollToSection('pricing')} className="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full text-right">חבילות ומחירים</button>
              <button onClick={() => scrollToSection('contact')} className="text-green-400 font-bold block px-3 py-2 rounded-md text-base w-full text-right">צור קשר</button>
            </div>
          </div>
        )}
      </nav>

      {/* Hero Section */}
      <div id="home" className="relative h-screen flex items-center justify-center overflow-hidden">
        {/* ... existing code ... */}
        <div className="absolute inset-0 z-0">
          <div className="absolute inset-0 bg-gradient-to-b from-slate-900 via-transparent to-slate-900 z-10"></div>
          <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-green-900/20 via-slate-900 to-slate-900"></div>
          {/* Animated Beams */}
          <div className="absolute top-0 left-1/4 w-1 h-full bg-green-500/20 blur-xl animate-pulse"></div>
          <div className="absolute top-0 right-1/4 w-1 h-full bg-green-500/20 blur-xl animate-pulse delay-75"></div>
          {/* Grid Pattern */}
          <div className="absolute inset-0 opacity-10" 
               style={{ backgroundImage: 'linear-gradient(#22c55e 1px, transparent 1px), linear-gradient(90deg, #22c55e 1px, transparent 1px)', backgroundSize: '50px 50px' }}>
          </div>
        </div>

        <div className="relative z-20 text-center px-4 max-w-5xl mx-auto mt-16">
          <div className="inline-block mb-4 px-4 py-1 rounded-full border border-green-500/50 bg-green-500/10 text-green-400 font-semibold text-sm tracking-wide animate-bounce">
            האטרקציה הניידת מספר 1 לבתי ספר
          </div>
          <h1 className="text-5xl md:text-7xl font-extrabold tracking-tight mb-6 leading-tight">
            הפכו את אולם הספורט <br />
            <span className="text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-600 filter drop-shadow-[0_0_15px_rgba(34,197,94,0.5)]">
              לזירת לייזר טאג עתידנית
            </span>
          </h1>
          <p className="mt-4 max-w-2xl mx-auto text-xl text-gray-300 mb-8">
            פעילות שיא עוצרת נשימה לעד 70 תלמידים בו זמנית!
            חוויה שמחברת, מגבשת ומעיפה את האנרגיה בבית הספר לשמיים.
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center items-center">
            <button onClick={() => scrollToSection('contact')} className="w-full sm:w-auto px-8 py-4 bg-green-600 hover:bg-green-500 text-black font-bold text-lg rounded-xl shadow-[0_0_20px_rgba(34,197,94,0.4)] transition-all transform hover:-translate-y-1">
              בואו נרים אירוע!
            </button>
            <button onClick={() => scrollToSection('pricing')} className="w-full sm:w-auto px-8 py-4 bg-transparent border-2 border-slate-600 hover:border-white text-white font-bold text-lg rounded-xl transition-all">
              צפייה בחבילות
            </button>
          </div>
        </div>

        <div className="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce text-gray-500">
          <ArrowDown className="w-8 h-8" />
        </div>
      </div>

      {/* Video Gallery Section (Updated with REAL videos) */}
      <div id="experience" className="py-24 bg-slate-900">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-5xl font-bold mb-4">האדרנלין מדבר בעד עצמו</h2>
            <p className="text-gray-400 text-lg">הצצה קטנה למה שקורה כשאנחנו מגיעים לבית הספר</p>
          </div>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            {videos.map((video) => (
              <div key={video.id} className="group relative aspect-[9/16] bg-slate-800 rounded-2xl overflow-hidden border border-slate-700 cursor-pointer transition-transform hover:scale-105 shadow-xl">
                
                {/* The Video Element */}
                <video 
                  className="absolute inset-0 w-full h-full object-cover"
                  src={video.src}
                  autoPlay 
                  loop 
                  muted 
                  playsInline
                />

                {/* Overlay (Gradient for text readability) */}
                <div className="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/90 group-hover:via-black/20 transition-all"></div>

                {/* Play Icon (Optional, center) */}
                <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                   <div className="bg-white/20 backdrop-blur-sm p-3 rounded-full">
                      <Play className="w-8 h-8 text-white fill-white" />
                   </div>
                </div>

                {/* Overlay Text */}
                <div className="absolute bottom-0 w-full p-4 text-white z-10">
                  <div className="flex items-center gap-2 mb-2">
                    <div className="w-8 h-8 rounded-full bg-green-500 flex items-center justify-center font-bold text-black text-xs border-2 border-black">LS</div>
                    <span className="text-sm font-bold shadow-black drop-shadow-md">{video.title}</span>
                  </div>
                  <p className="text-xs md:text-sm font-medium line-clamp-2 text-gray-200">{video.desc}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* Features Section */}
      <div className="py-20 bg-slate-800/50">
        {/* ... existing code ... */}
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-12 text-center">
            <div className="bg-slate-900 p-8 rounded-2xl border border-slate-700 hover:border-green-500/50 transition-colors">
              <div className="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6 text-green-400">
                <Users className="w-8 h-8" />
              </div>
              <h3 className="text-2xl font-bold mb-4">עד 70 משתתפים בסבב</h3>
              <p className="text-gray-400">
                פעילות המונית ועוצמתית. אנחנו יודעים להפעיל שכבות שלמות וכיתות גדולות בו זמנית, מה שמאפשר שטף אירוע מושלם.
              </p>
            </div>
            
            <div className="bg-slate-900 p-8 rounded-2xl border border-slate-700 hover:border-green-500/50 transition-colors">
              <div className="w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-400">
                <Zap className="w-8 h-8" />
              </div>
              <h3 className="text-2xl font-bold mb-4">ויזואליות מנצחת</h3>
              <p className="text-gray-400">
                אנו מקימים תפאורה, תאורה ואפקטים שהופכים כל אולם ספורט פשוט לזירה הייטקיסטית וצבעונית שילדים לא שוכחים.
              </p>
            </div>

            <div className="bg-slate-900 p-8 rounded-2xl border border-slate-700 hover:border-green-500/50 transition-colors">
              <div className="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6 text-red-400">
                <Shield className="w-8 h-8" />
              </div>
              <h3 className="text-2xl font-bold mb-4">100% בטיחות</h3>
              <p className="text-gray-400">
                ציוד חדיש בטכנולוגיית אינפרא-אדום (ללא לייזר מסוכן), ללא כדורים פיזיים וללא כאב. מתאים לכל גיל ולכל מקום.
              </p>
            </div>
          </div>
        </div>
      </div>

      {/* Pricing Section */}
      <div id="pricing" className="py-24 relative overflow-hidden">
         {/* ... existing code ... */}
        {/* Background elements */}
        <div className="absolute top-0 right-0 w-96 h-96 bg-green-500/10 rounded-full blur-3xl -z-10"></div>
        <div className="absolute bottom-0 left-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl -z-10"></div>

        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-5xl font-bold mb-4">בחרו את החבילה שלכם</h2>
            <p className="text-gray-400 text-lg">פתרונות מותאמים לכל סוג של אירוע בית ספרי</p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8 items-start">
            
            {/* Package 1: Basic */}
            <div className="bg-slate-800 rounded-3xl p-8 border border-slate-700 relative">
              <h3 className="text-xl font-bold text-gray-300 mb-2">גיבוש שכבתי</h3>
              <div className="text-4xl font-bold text-white mb-6">₪2,500<span className="text-lg text-gray-500 font-normal">+מע"מ</span></div>
              <p className="text-gray-400 text-sm mb-6 h-12">אירוע ממוקד ואינטימי, מעולה לגיבוש כיתות.</p>
              
              <ul className="space-y-4 mb-8">
                <li className="flex items-center gap-3 text-gray-300">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>פעילות של 3 שעות</span>
                </li>
                <li className="flex items-center gap-3 text-gray-300">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>קבוצות של 40 משתתפים</span>
                </li>
                <li className="flex items-center gap-3 text-gray-300">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>סבבים של 40 דק' עד שעה</span>
                </li>
                <li className="flex items-center gap-3 text-gray-300">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>כל שעה נוספת: 600 ש"ח</span>
                </li>
              </ul>
              <button onClick={() => scrollToSection('contact')} className="w-full py-3 rounded-xl border border-green-500 text-green-500 font-bold hover:bg-green-500 hover:text-black transition-colors">
                אני רוצה את זה
              </button>
            </div>

            {/* Package 2: School Happening (Highlighted) */}
            <div className="bg-slate-800 rounded-3xl p-8 border-2 border-green-500 relative transform md:-translate-y-4 shadow-[0_0_30px_rgba(34,197,94,0.2)]">
              <div className="absolute top-0 right-0 bg-green-500 text-black text-xs font-bold px-3 py-1 rounded-bl-xl rounded-tr-xl">
                הכי פופולרי
              </div>
              <h3 className="text-2xl font-bold text-white mb-2">הפנינג בית ספרי</h3>
              <div className="text-4xl font-bold text-green-400 mb-6">₪4,500<span className="text-lg text-gray-500 font-normal">+מע"מ</span></div>
              <p className="text-gray-400 text-sm mb-6 h-12">אירוע ענק לכל בית הספר, תחלופה מהירה ואנרגיה גבוהה.</p>
              
              <ul className="space-y-4 mb-8">
                <li className="flex items-center gap-3 text-white">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>החל מ-4 שעות פעילות</span>
                </li>
                <li className="flex items-center gap-3 text-white">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>החלפות כל 10 דקות (טורניר)</span>
                </li>
                <li className="flex items-center gap-3 text-white">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>מתאים למאות תלמידים ביום</span>
                </li>
                <li className="flex items-center gap-3 text-white">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>אווירת קרנבל אמיתית</span>
                </li>
              </ul>
              <button onClick={() => scrollToSection('contact')} className="w-full py-4 rounded-xl bg-green-500 text-black font-bold hover:bg-green-400 transition-colors shadow-lg">
                הזמינו עכשיו
              </button>
            </div>

            {/* Package 3: Premium */}
            <div className="bg-slate-800 rounded-3xl p-8 border border-slate-700 relative">
              <h3 className="text-xl font-bold text-gray-300 mb-2">הפנינג שכבתי אקסטרים</h3>
              <div className="text-4xl font-bold text-white mb-6">₪5,500<span className="text-lg text-gray-500 font-normal">+מע"מ</span></div>
              <p className="text-gray-400 text-sm mb-6 h-12">החבילה הגדולה והמפנקת. סבבים גדולים ל-10-15 כיתות.</p>
              
              <ul className="space-y-4 mb-8">
                <li className="flex items-center gap-3 text-gray-300">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>5 שעות פעילות מלאות</span>
                </li>
                <li className="flex items-center gap-3 text-gray-300">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>עד 70 ילדים בו זמנית!</span>
                </li>
                <li className="flex items-center gap-3 text-gray-300">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>מתאים ל-10 עד 15 כיתות</span>
                </li>
                <li className="flex items-center gap-3 text-gray-300">
                  <Check className="w-5 h-5 text-green-500 flex-shrink-0" />
                  <span>כל שעה נוספת: 1000 ש"ח</span>
                </li>
              </ul>
              <button onClick={() => scrollToSection('contact')} className="w-full py-3 rounded-xl border border-purple-500 text-purple-400 font-bold hover:bg-purple-600 hover:text-white transition-colors">
                לפרטים נוספים
              </button>
            </div>

          </div>
        </div>
      </div>

      {/* Contact Section */}
      <div id="contact" className="py-24 bg-slate-900 border-t border-slate-800">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="bg-slate-800 rounded-2xl p-8 md:p-12 shadow-2xl">
            <div className="text-center mb-10">
              <h2 className="text-3xl font-bold mb-4">מוכנים לשריין תאריך?</h2>
              <p className="text-gray-400">השאירו פרטים ונחזור אליכם לבניית האירוע המושלם</p>
            </div>

            <form className="space-y-6" onSubmit={(e) => e.preventDefault()}>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label htmlFor="name" className="block text-sm font-medium text-gray-400 mb-2">שם איש קשר</label>
                  <input type="text" id="name" className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500" placeholder="ישראל ישראלי" />
                </div>
                <div>
                  <label htmlFor="school" className="block text-sm font-medium text-gray-400 mb-2">שם המוסד / בית ספר</label>
                  <input type="text" id="school" className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500" placeholder="תיכון..." />
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label htmlFor="phone" className="block text-sm font-medium text-gray-400 mb-2">טלפון</label>
                  <input type="tel" id="phone" className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500" placeholder="050-0000000" />
                </div>
                <div>
                  <label htmlFor="package" className="block text-sm font-medium text-gray-400 mb-2">חבילה רצויה</label>
                  <select id="package" className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500">
                    <option>הפנינג בית ספרי (4500 ₪)</option>
                    <option>גיבוש שכבתי (2500 ₪)</option>
                    <option>הפנינג אקסטרים (5500 ₪)</option>
                    <option>אחר / התייעצות</option>
                  </select>
                </div>
              </div>

              <button type="submit" className="w-full bg-gradient-to-r from-green-600 to-green-500 text-black font-bold text-xl py-4 rounded-xl hover:shadow-[0_0_20px_rgba(34,197,94,0.4)] transition-all transform hover:-translate-y-1">
                שלח פרטים
              </button>
            </form>

            <div className="mt-8 flex justify-center items-center gap-6 text-gray-400">
              <div className="flex items-center gap-2">
                <Phone className="w-5 h-5" />
                <span>050-1234567</span>
              </div>
              <div className="flex items-center gap-2">
                <Calendar className="w-5 h-5" />
                <span>זמינות כל השנה</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Footer */}
      <footer className="bg-slate-950 py-8 text-center text-gray-500 text-sm">
        <p>© 2024 לייזר סטרייק - אטרקציות לייזר טאג ניידות. כל הזכויות שמורות.</p>
      </footer>

      {/* Floating AI Button */}
      <button
        onClick={() => setShowAIModal(true)}
        className="fixed bottom-6 left-6 z-50 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 rounded-full shadow-lg hover:shadow-2xl transition-all transform hover:scale-110 group"
      >
        <Sparkles className="w-6 h-6 group-hover:animate-spin" />
        <span className="absolute left-full ml-2 bg-slate-800 text-white text-xs px-2 py-1 rounded-md whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
          העוזר החכם של לייזר סטרייק
        </span>
      </button>

      {/* AI Modal */}
      {showAIModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4" onClick={() => setShowAIModal(false)}>
          <div className="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
          <div className="bg-slate-800 rounded-3xl border border-slate-700 shadow-2xl w-full max-w-2xl relative z-10 overflow-hidden" onClick={e => e.stopPropagation()}>
            
            {/* Modal Header */}
            <div className="bg-gradient-to-r from-indigo-900 to-purple-900 p-6 flex justify-between items-center">
              <div className="flex items-center gap-3">
                <Sparkles className="w-6 h-6 text-purple-300" />
                <h3 className="text-xl font-bold text-white">העוזר החכם של לייזר סטרייק ✨</h3>
              </div>
              <button onClick={() => setShowAIModal(false)} className="text-gray-300 hover:text-white">
                <X className="w-6 h-6" />
              </button>
            </div>

            {/* Modal Body */}
            <div className="p-6 max-h-[70vh] overflow-y-auto">
              
              {/* Mode Switcher */}
              <div className="flex bg-slate-900/50 p-1 rounded-xl mb-6">
                <button
                  onClick={() => { setAiMode('plan'); setAiOutput(''); setAiError(''); }}
                  className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl font-medium transition-all ${aiMode === 'plan' ? 'bg-slate-700 text-white shadow-md' : 'text-gray-400 hover:text-gray-200'}`}
                >
                  <Calendar className="w-4 h-4" /> תכנון אירוע
                </button>
                <button
                  onClick={() => { setAiMode('invite'); setAiOutput(''); setAiError(''); }}
                  className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl font-medium transition-all ${aiMode === 'invite' ? 'bg-slate-700 text-white shadow-md' : 'text-gray-400 hover:text-gray-200'}`}
                >
                  <MessageSquare className="w-4 h-4" /> ניסוח הזמנה
                </button>
              </div>

              {/* Inputs based on mode */}
              <div className="space-y-4 mb-6">
                {aiMode === 'plan' ? (
                  <>
                    <div>
                      <label className="block text-sm font-medium text-gray-400 mb-1">כמות תלמידים משוערת</label>
                      <input type="number" name="kids" value={aiInputData.kids} onChange={handleAiInputChange} className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500 placeholder-gray-600" placeholder="לדוגמה: 200" />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-400 mb-1">משך הפעילות (בשעות)</label>
                      <input type="number" name="duration" value={aiInputData.duration} onChange={handleAiInputChange} className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500 placeholder-gray-600" placeholder="לדוגמה: 4" />
                    </div>
                  </>
                ) : (
                  <div>
                    <label className="block text-sm font-medium text-gray-400 mb-1">שם בית הספר</label>
                    <input type="text" name="schoolName" value={aiInputData.schoolName} onChange={handleAiInputChange} className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500 placeholder-gray-600" placeholder="תיכון עירוני..." />
                  </div>
                )}
              </div>

              {aiError && (
                <p className="text-red-400 text-sm mb-4 bg-red-900/20 p-2 rounded border border-red-900/50">{aiError}</p>
              )}

              <button onClick={generateAIContent} disabled={isLoadingAI} className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 disabled:opacity-50">
                {isLoadingAI ? <Loader className="w-5 h-5 animate-spin" /> : <><Sparkles className="w-5 h-5" /> שאל את ה-AI ✨</>}
              </button>

              {/* Output Area */}
              {aiOutput && (
                <div className="mt-6 bg-slate-900/70 p-4 rounded-2xl border border-slate-700/50 animate-fadeIn">
                  <h4 className="text-purple-300 font-bold mb-2 flex items-center gap-2"><Sparkles className="w-4 h-4" /> ההצעה שלי:</h4>
                  <div className="text-gray-300 whitespace-pre-wrap leading-relaxed text-sm">
                    {aiOutput}
                  </div>
                </div>
              )}

            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default LaserStrikeLanding;